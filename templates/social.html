{% extends "layout.html" %}
{% block title %}Social • FinPulse{% endblock %}
{% block content %}
  <div class="d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2">
    <div>
      <h1 class="h4 mb-1">Social Insights</h1>
      <p class="text-muted mb-0">Aggregated bullish vs bearish sentiment by symbol.</p>
    </div>
    <a href="#" class="btn btn-sm btn-outline-secondary" id="refresh-sentiment">Refresh</a>
  </div>

  <section class="coming-soon-hero mb-4">
    <div class="card shadow-sm border-0 overflow-hidden">
      <div class="card-body p-4 p-lg-5 d-flex flex-column flex-lg-row align-items-start align-items-lg-center gap-4">
        <div class="flex-grow-1">
          <div class="badge bg-warning-subtle text-warning-emphasis mb-3">Coming Soon</div>
          <h2 class="h4 mb-3">Live social pulse is almost here</h2>
          <p class="text-muted mb-0">
            We&apos;re wiring up direct feeds so you can act on accelerated sentiment in real time.
            Until those APIs are live, explore today&apos;s simulated snapshots and planned coverage below.
          </p>
        </div>
        <div class="hero-roadmap">
          <div class="roadmap-item">
            <span class="roadmap-label">X streams</span>
            <small class="text-muted d-block">Real-time cashtags &amp; options flow</small>
          </div>
          <div class="roadmap-item">
            <span class="roadmap-label">Reddit pulse</span>
            <small class="text-muted d-block">Subreddit momentum &amp; theme tracking</small>
          </div>
          <div class="roadmap-item">
            <span class="roadmap-label">Stocktwits radar</span>
            <small class="text-muted d-block">Retail positioning heatmaps</small>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="social-metrics mb-4">
    <div class="row g-3">
      <div class="col-12 col-md-6 col-xl-3">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="text-muted text-uppercase small fw-semibold mb-2">Symbols tracked</div>
            <div class="display-6 fw-semibold mb-1" id="metric-symbols">—</div>
            <p class="text-muted small mb-0">Universe covered in the latest capture.</p>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-6 col-xl-3">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="text-muted text-uppercase small fw-semibold mb-2">Total posts</div>
            <div class="display-6 fw-semibold mb-1" id="metric-posts">—</div>
            <p class="text-muted small mb-0">Volume of messages analysed across sources.</p>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-6 col-xl-3">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="text-muted text-uppercase small fw-semibold mb-2">Bullish share</div>
            <div class="display-6 fw-semibold mb-1" id="metric-bullish">—</div>
            <p class="text-muted small mb-0">Percent of posts skewing positive.</p>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-6 col-xl-3">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <div class="text-muted text-uppercase small fw-semibold mb-2">Avg. net score</div>
            <div class="display-6 fw-semibold mb-1" id="metric-net-score">—</div>
            <p class="text-muted small mb-0">Composite signal strength for the universe.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="row g-3 social-grid">
    <div class="col-12 col-xl-4">
      <div class="card shadow-sm h-100 social-list-card">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
            <h2 class="h6 mb-0">Symbols</h2>
            <span class="text-muted small" id="sentiment-list-count"></span>
          </div>
          <div id="sentiment-list" class="social-symbol-list"></div>
        </div>
      </div>
    </div>
    <div class="col-12 col-xl-8">
      <div id="sentiment-detail" class="social-detail"></div>
      <div id="sentiment-empty" class="alert alert-light border d-none">No sentiment data found. Run <code>flask --app app ingest-social</code> first.</div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script src="https://s3.tradingview.com/tv.js" defer></script>
  <script src="{{ url_for('static', filename='js/social-summary.js') }}"></script>
{% endblock %}
