{% extends "layout.html" %}
{% block content %}
  <div class="text-center mb-4">
    <h1 class="display-6">Welcome to FinPulse</h1>
    <p class="lead mt-2">Curated financial insights across industries and commodities.</p>
  </div>

  <!-- Macro + Market overview -->
  <div class="row g-3 mb-4 align-items-stretch">
    <div class="col-12 col-lg-6">
      <div class="card shadow-sm h-100">
        <div class="card-body macro-card">
          <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3">
            <h2 class="h6 mb-0">Macro Trends</h2>
            <span class="text-muted small macro-updated">Loadingâ€¦</span>
          </div>
          <div class="macro-snapshot-grid" id="macro-trends" data-detail-url="{{ url_for('web.macro_trends') }}">
            <article class="macro-snapshot" data-category="job-market">
              <header class="macro-snapshot-header">
                <h3 class="h6 text-uppercase text-muted mb-0">Job Market</h3>
                <a class="btn btn-sm btn-outline-light" href="{{ url_for('web.macro_trends') }}#job-market">Deep dive</a>
              </header>
              <ul class="macro-snapshot-list" id="macro-job-market"></ul>
            </article>

            <article class="macro-snapshot" data-category="inflation">
              <header class="macro-snapshot-header">
                <h3 class="h6 text-uppercase text-muted mb-0">Inflation</h3>
                <a class="btn btn-sm btn-outline-light" href="{{ url_for('web.macro_trends') }}#inflation">Deep dive</a>
              </header>
              <ul class="macro-snapshot-list" id="macro-inflation"></ul>
            </article>

            <article class="macro-snapshot" data-category="economic-activities">
              <header class="macro-snapshot-header">
                <h3 class="h6 text-uppercase text-muted mb-0">Economic Activities</h3>
                <a class="btn btn-sm btn-outline-light" href="{{ url_for('web.macro_trends') }}#economic-activities">Deep dive</a>
              </header>
              <ul class="macro-snapshot-list" id="macro-economic-activities"></ul>
            </article>
          </div>
          <div class="text-end mt-3">
            <a class="btn btn-outline-light btn-sm" href="{{ url_for('web.macro_trends') }}">Open macro dashboard</a>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-lg-6 d-flex flex-column gap-3">
      <div class="card shadow-sm flex-fill dashboard-half">
        <div class="card-body d-flex flex-column">
          <div class="d-flex align-items-center justify-content-between mb-2">
            <h2 class="h6 mb-0">Market heatmap</h2>
          </div>
          <div class="tradingview-widget-container tv-flex-fill flex-fill">
            <div id="tv-heatmap" class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js" async>
            {
              "dataSource": "SPX500",
              "grouping": "sector",
              "blockSize": "market_cap_basic",
              "blockColor": "change",
              "colorTheme": "dark",
              "locale": "en",
              "width": "100%",
              "height": "100%"
            }
            </script>
          </div>
        </div>
      </div>
      <div class="card shadow-sm flex-fill dashboard-half">
        <div class="card-body d-flex flex-column">
          <h2 class="h6 mb-3">Top movers today</h2>
          <div class="tradingview-widget-container tv-flex-fill flex-fill">
            <div id="tv-hotlists" class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-hotlists.js" async>
            {
              "colorTheme": "dark",
              "dateRange": "1D",
              "exchange": "US",
              "showChart": true,
              "locale": "en",
              "width": "100%",
              "height": "100%"
            }
            </script>
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock %}

{% block scripts %}
  <!-- TradingView widgets library -->
  <script src="https://s3.tradingview.com/tv.js"></script>

  <!-- Macro trends script -->
  <script src="{{ url_for('static', filename='js/macro-trends.js') }}"></script>
  {# Social/Twitter scripts removed #}
{% endblock %}
