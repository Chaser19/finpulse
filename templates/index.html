{% extends "layout.html" %}
{% block title %}Home | Finpulse{% endblock %}
{% block content %}
  <div class="home-shell">
    <section class="hero-section home-hero">
      <div class="home-hero-grid">
        <div class="home-hero-copy">
          <span class="hero-kicker">Behavioural Market Signals</span>
          <h1 class="hero-title">Daily Market Pulse</h1>
          <p class="hero-subtitle">FinPulse integrates macroeconomic trends, curated news, and real-time social sentiment into a single platform, enabling investors to stay informed and make faster, more confident decisions.</p>
        <div class="hero-ctas">
          <a class="btn btn-primary btn-lg" href="{{ url_for('web.macro_trends') }}">Explore dashboard</a>
        </div>
        </div>
        <div class="home-hero-panels">
          <div class="home-hero-panel">
            <div class="home-panel-header">
              <h2 class="h6 text-uppercase text-muted mb-0">Platform snapshot</h2>
              <span class="home-panel-note">Live signal stack</span>
            </div>
            <ul class="hero-signal-list home-snapshot-list">
              <li>
                <a class="home-snapshot-link" href="{{ url_for('web.macro_trends') }}">
                  <span class="signal-icon macro" aria-hidden="true"></span>
                  <div>
                    <strong>Macro Dashboards</strong>
                    <small>40+ indicators tracking growth, inflation, and liquidity.</small>
                  </div>
                </a>
              </li>
              <li>
                <a class="home-snapshot-link" href="{{ url_for('web.news_list') }}">
                  <span class="signal-icon news" aria-hidden="true"></span>
                  <div>
                    <strong>Ranked Newsfeed</strong>
                    <small>Credibility tiers, sentiment scoring, and narrative clusters.</small>
                  </div>
                </a>
              </li>
              <li>
                <a class="home-snapshot-link" href="{{ url_for('web.social') }}">
                  <span class="signal-icon social" aria-hidden="true"></span>
                  <div>
                    <strong>Social Pulse</strong>
                    <small>Real-time chatter and synthetic history for coverage symbols.</small>
                  </div>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section class="home-chart">
      <div class="row g-3 align-items-stretch">
        <div class="col-12 col-lg-7">
          <div class="card h-100 home-chart-card">
            <div class="card-body">
              <div class="home-chart-header">
                <div class="home-chart-title">Price vs. Engagement Index</div>
                <svg class="home-chart-icon" viewBox="0 0 28 28" fill="none" aria-hidden="true">
                  <rect x="3" y="3" width="22" height="22" rx="6" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M8 18l4-5 4 3 4-7" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                  <circle cx="8" cy="18" r="1.3" fill="currentColor"/>
                  <circle cx="12" cy="13" r="1.3" fill="currentColor"/>
                  <circle cx="16" cy="16" r="1.3" fill="currentColor"/>
                  <circle cx="20" cy="9" r="1.3" fill="currentColor"/>
                </svg>
              </div>
              <div class="home-chart-canvas">
                <canvas id="priceEngagementChart"></canvas>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-5">
          <div class="card h-100 home-chart-copy">
            <div class="card-body">
              <span class="home-section-kicker">Signal overlay</span>
              <h2 class="home-section-title">Price vs. Engagement Index</h2>
              <p class="home-section-subtitle">
                This view compares intraday price action with a normalized engagement index derived from cashtag attention.
                The gold line tracks attention momentum, helping highlight divergences where sentiment shifts ahead of price.
              </p>
              <div class="home-chart-sentiment">
                <div class="text-uppercase small text-muted fw-semibold">Sentiment mix (Sample)</div>
                <div class="sentiment-bar" aria-label="Sentiment mix">
                  <div class="sentiment-fill bull" style="width: 68%"></div>
                  <div class="sentiment-fill neutral" style="width: 22%"></div>
                  <div class="sentiment-fill bear" style="width: 10%"></div>
                </div>
              </div>
              <p class="text-muted mb-0 small">Left axis shows price range; right axis shows engagement on a 0–100 scale.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="hero-pillars home-pillars">
      <div class="home-section-header">
        <div>
          <span class="home-section-kicker">Choose a lens</span>
          <h2 class="home-section-title">Three signals, one pulse.</h2>
          <p class="home-section-subtitle">Pick a perspective to dive straight into macro context, news intelligence, or social momentum.</p>
        </div>
      </div>
      <div class="row g-3">
        <div class="col-12 col-md-4">
          <a class="hero-pillar card h-100 text-decoration-none text-reset" href="{{ url_for('web.macro_trends') }}">
            <div class="card-body">
              <div class="signal-icon macro" aria-hidden="true"></div>
              <h3 class="hero-pillar-title">Macro dashboards</h3>
              <p class="text-white-50 mb-0">Monitor employment, inflation, and activity trends with smart annotations and sparkline context.</p>
            </div>
          </a>
        </div>
        <div class="col-12 col-md-4">
          <a class="hero-pillar card h-100 text-decoration-none text-reset" href="{{ url_for('web.news_list') }}">
            <div class="card-body">
              <div class="signal-icon news" aria-hidden="true"></div>
              <h3 class="hero-pillar-title">Signal-ranked news</h3>
              <p class="text-white-50 mb-0">Surface the stories that matter with credibility labeling, sentiment tags, and ready-to-share briefs.</p>
            </div>
          </a>
        </div>
        <div class="col-12 col-md-4">
          <a class="hero-pillar card h-100 text-decoration-none text-reset" href="{{ url_for('web.social') }}">
            <div class="card-body">
              <div class="signal-icon social" aria-hidden="true"></div>
              <h3 class="hero-pillar-title">Social intelligence</h3>
              <p class="text-white-50 mb-0">Quantify chatter momentum, net sentiment, and influencer activity across watchlist symbols.</p>
            </div>
          </a>
        </div>
      </div>
    </section>

    <section class="macro-overview home-overview">
      <div class="home-section-header">
        <div>
          <span class="home-section-kicker">Macro pulse</span>
          <h2 class="home-section-title">Global Macro Trends</h2>
          <p class="home-section-subtitle">Scan jobs, inflation, and activity in one glance before diving into the full dashboard.</p>
        </div>
        <span class="text-muted small macro-updated">Loading…</span>
      </div>
      <div class="card shadow-sm">
        <div class="card-body macro-card">
          <div class="macro-overlay" data-role="macro-overlay">
            <div class="macro-overlay-header">
              <div>
                <span class="macro-overlay-kicker">Macro overlay</span>
                <h3 class="macro-overlay-title">US economy cross-section</h3>
                <p class="macro-overlay-subtitle">Indexed to 100 at the start of the window. Unemployment is inverted so higher reflects improvement.</p>
              </div>
              <div class="macro-overlay-legend">
                <span class="macro-overlay-chip is-labor">Labor</span>
                <span class="macro-overlay-chip is-inflation">Inflation</span>
                <span class="macro-overlay-chip is-activity">Activity</span>
              </div>
            </div>
            <div class="macro-overlay-chart" data-role="overlay-chart">
              <div class="macro-overlay-placeholder">Awaiting macro overlay.</div>
            </div>
            <div class="macro-overlay-footnote">
              <span class="macro-overlay-note">Series shown: unemployment (inverted), CPI YoY, industrial production.</span>
              <span class="macro-overlay-updated text-muted small" data-role="overlay-updated">Loading…</span>
            </div>
          </div>
          <div class="macro-overview-grid" id="macro-trends" data-detail-url="{{ url_for('web.macro_trends') }}">
            <a class="macro-overview-card" data-category="job-market" href="{{ url_for('web.macro_trends') }}#job-market">
              <header class="macro-overview-header">
                <div class="macro-overview-heading">
                  <span class="macro-overview-icon macro-icon-jobs" aria-hidden="true"></span>
                  <div>
                    <h3 class="macro-overview-title mb-1">Job Market</h3>
                    <p class="macro-overview-blurb text-muted mb-0" data-role="blurb">Tracking the labour pulse…</p>
                  </div>
                </div>
              </header>
              <div class="macro-overview-body">
                <div class="macro-overview-spark">
                  <div class="macro-spark-holder" data-role="spark"></div>
                  <div class="macro-overview-meta text-muted small" data-role="spark-meta"></div>
                </div>
                <ul class="macro-overview-stats list-unstyled mb-0" data-role="metrics"></ul>
              </div>
            </a>

            <a class="macro-overview-card" data-category="inflation" href="{{ url_for('web.macro_trends') }}#inflation">
              <header class="macro-overview-header">
                <div class="macro-overview-heading">
                  <span class="macro-overview-icon macro-icon-inflation" aria-hidden="true"></span>
                  <div>
                    <h3 class="macro-overview-title mb-1">Inflation</h3>
                    <p class="macro-overview-blurb text-muted mb-0" data-role="blurb">Reading price pressures…</p>
                  </div>
                </div>
              </header>
              <div class="macro-overview-body">
                <div class="macro-overview-spark">
                  <div class="macro-spark-holder" data-role="spark"></div>
                  <div class="macro-overview-meta text-muted small" data-role="spark-meta"></div>
                </div>
                <ul class="macro-overview-stats list-unstyled mb-0" data-role="metrics"></ul>
              </div>
            </a>

            <a class="macro-overview-card" data-category="economic-activities" href="{{ url_for('web.macro_trends') }}#economic-activities">
              <header class="macro-overview-header">
                <div class="macro-overview-heading">
                  <span class="macro-overview-icon macro-icon-growth" aria-hidden="true"></span>
                  <div>
                    <h3 class="macro-overview-title mb-1">Economic Activities</h3>
                    <p class="macro-overview-blurb text-muted mb-0" data-role="blurb">Growth and demand signals…</p>
                  </div>
                </div>
              </header>
              <div class="macro-overview-body">
                <div class="macro-overview-spark">
                  <div class="macro-spark-holder" data-role="spark"></div>
                  <div class="macro-overview-meta text-muted small" data-role="spark-meta"></div>
                </div>
                <ul class="macro-overview-stats list-unstyled mb-0" data-role="metrics"></ul>
              </div>
            </a>
          </div>
          <div class="text-end mt-3">
            <a class="btn btn-outline-light btn-sm" href="{{ url_for('web.macro_trends') }}">Open macro dashboard</a>
          </div>
        </div>
      </div>
    </section>

    <section class="home-positioning-statement" aria-label="Positioning statement">
      <p class="home-positioning-text">We monetize attention asymmetry - users get speed, clarity, and conviction in markets where traditional information arrives too late.</p>
    </section>
  </div>
{% endblock %}

{% block scripts %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
  <script src="{{ url_for('static', filename='js/home-chart.js') }}"></script>
  <!-- Macro trends script -->
  <script src="{{ url_for('static', filename='js/macro-trends.js') }}"></script>
  {# Social/Twitter scripts removed #}
{% endblock %}
